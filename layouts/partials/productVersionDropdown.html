<script>
    // I've heard that .stopPropogation() is not ideal, potentially needs a rework
    $( document ).ready(function() {
        $('.productButtonTitle').click( function(event){
            event.stopPropagation();
            $('.hiddenProducts').toggle();
        });
        $(document).click( function(){
            $('.hiddenProducts').hide();
        });

        $('.versionButtonTitle').click( function(event){
            event.stopPropagation();
            $('.hiddenVersions').toggle();
        });
        $(document).click( function(){
            $('.hiddenVersions').hide();
        });
});
</script>

<div class="buttonHolder">
    <div id="productButton">
        {{ if isset .Params "product" }}
            {{ $display := .Params.product }}
            <a class="productButtonTitle">{{ $display }}<i class="fa fa-chevron-down dropdownArrow" aria-hidden="true"></i></a>
        {{ else }}
            {{ $display := "Projects" }}
            <a class="productButtonTitle">{{ $display }}<i class="fa fa-chevron-down dropdownArrow" aria-hidden="true"></i></a>
        {{ end }}
        <div class="hiddenProducts" style="display: none;">
            <ul class="hiddenItems">
                {{ range sort .Site.Params.Products "weight" }} 
                    <li class="hiddenItem"><a href="/{{ .identifier }}">{{ .name }}</a></li>
                {{ end }}
            </ul>
        </div>
    </div>

    <div id="versionButton">
        {{ if isset .Params "version" }} 
            {{ $display := .Params.version }}
            <a class="versionButtonTitle">{{ $display }}<i class="fa fa-chevron-down dropdownArrow" aria-hidden="true"></i></a>
        {{ else }}
            {{ $display := "Version" }}
            <a class="versionButtonTitle">{{ $display }}<i class="fa fa-chevron-down dropdownArrow" aria-hidden="true"></i></a>
        {{ end }}
        <div class="hiddenVersions" style="display: none;">
            <ul class="hiddenItems">
                {{ $product := .Section }}
                {{ $product2 := replace $product "-" "_" }}
                {{ $product_info := (index .Site.Params.products $product2) }} 
                {{ range $k, $v := $product_info.versions }} 
                    {{ $version := $k }}
                    <li class="hiddenItem"><a href="/{{ $product }}/{{ $k }}">{{ $k }}</a></li>
                {{ end }}
            </ul>
        </div>
    </div>
</div>


