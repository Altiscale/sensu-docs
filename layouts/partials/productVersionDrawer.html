<script>
    // I've heard that .stopPropogation() is not ideal, potentially needs a rework
    $( document ).ready(function() {
        $('.productButtonTitleDrawer').click( function(event){
            event.stopPropagation();
            $('.hiddenProductsDrawer').toggle();
        });
        $(document).click( function(){
            $('.hiddenProductsDrawer').hide();
        });

        $('.versionButtonTitleDrawer').click( function(event){
            event.stopPropagation();
            $('.hiddenVersionsDrawer').toggle();
        });
        $(document).click( function(){
            $('.hiddenVersionsDrawer').hide();
        });
    });
</script>

<div class="buttonHolder">
    <div id="productButtonDrawer">
        {{ if isset .Params "product" }}
            {{ $display := .Params.product }}
            <a class="productButtonTitleDrawer">{{ $display }}<i class="fa fa-chevron-down dropdownArrow" aria-hidden="true"></i></a>
        {{ else }}
            {{ $display := "Projects" }}
            <a class="productButtonTitleDrawer">{{ $display }}<i class="fa fa-chevron-down dropdownArrow" aria-hidden="true"></i></a>
        {{ end }}
        <div class="hiddenProductsDrawer" style="display: none;">
            <ul class="hiddenItems">
                {{ range sort .Site.Params.Products "weight" }} 
                    <li class="hiddenItem"><a href="/{{ .identifier }}">{{ .name }}</a></li>
                {{ end }}
            </ul>
        </div>
    </div>
    <br>
    <div id="versionButtonDrawer">
        {{ if isset .Params "version" }} 
            {{ $display := .Params.version }}
            <a class="versionButtonTitleDrawer">{{ $display }}<i class="fa fa-chevron-down dropdownArrow" aria-hidden="true"></i></a>
        {{ else }}
            {{ $display := "Version" }}
            <a class="versionButtonTitleDrawer">{{ $display }}<i class="fa fa-chevron-down dropdownArrow" aria-hidden="true"></i></a>
        {{ end }}
        <div class="hiddenVersionsDrawer" style="display: none;">
            <ul class="hiddenItems">
                {{ $product := .Section }}
                {{ $product2 := replace $product "-" "_" }}
                {{ $product_info := (index .Site.Params.products $product2) }} 
                {{ range $k, $v := $product_info.versions }} 
                    <li class="hiddenItem"><a href="/{{ $product }}/{{ $k }}">{{ $k }}</a></li>
                {{ end }}
            </ul>
        </div>
    </div>
</div>


